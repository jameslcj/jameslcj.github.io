<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Coercion | hellolc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Abstract Value OperationsJSON.stringify123456789JSON.stringify( undefined ); //&amp;quot;undefined&amp;quot;JSON.stringify( function()&amp;#123;&amp;#125; ); //&amp;quot;undefined&amp;quot;JSON.stringify( null ); //&amp;quot;nul">
<meta name="keywords" content="You Don&#39;t Know JS">
<meta property="og:type" content="article">
<meta property="og:title" content="Coercion">
<meta property="og:url" content="http://blog.hellolc.com/2017/10/22/Coercion/index.html">
<meta property="og:site_name" content="hellolc">
<meta property="og:description" content="Abstract Value OperationsJSON.stringify123456789JSON.stringify( undefined ); //&amp;quot;undefined&amp;quot;JSON.stringify( function()&amp;#123;&amp;#125; ); //&amp;quot;undefined&amp;quot;JSON.stringify( null ); //&amp;quot;nul">
<meta property="og:updated_time" content="2017-10-29T03:06:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Coercion">
<meta name="twitter:description" content="Abstract Value OperationsJSON.stringify123456789JSON.stringify( undefined ); //&amp;quot;undefined&amp;quot;JSON.stringify( function()&amp;#123;&amp;#125; ); //&amp;quot;undefined&amp;quot;JSON.stringify( null ); //&amp;quot;nul">
  
    <link rel="alternate" href="/atom.xml" title="hellolc" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hellolc</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.hellolc.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Coercion" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/22/Coercion/" class="article-date">
  <time datetime="2017-10-22T06:28:26.000Z" itemprop="datePublished">2017-10-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Coercion
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Abstract-Value-Operations"><a href="#Abstract-Value-Operations" class="headerlink" title="Abstract Value Operations"></a>Abstract Value Operations</h2><h3 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify"></a>JSON.stringify</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">JSON.stringify( undefined ); //&quot;undefined&quot;</span><br><span class="line">JSON.stringify( function()&#123;&#125; ); //&quot;undefined&quot;</span><br><span class="line">JSON.stringify( null ); //&quot;null&quot;</span><br><span class="line">JSON.stringify(</span><br><span class="line">   [1,undefined,function()&#123;&#125;,4]</span><br><span class="line">); // &quot;[1,null,null,4]&quot;</span><br><span class="line">JSON.stringify(</span><br><span class="line">   &#123; a:2, b:function()&#123;&#125; &#125;</span><br><span class="line">);// &quot;&#123;&quot;a&quot;:2&#125;&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>从上可以看出, 不同类型的值在不同类型中, <code>JSON.stringify</code>的结果表现形式也不一样, 在数组的<code>undefined</code>, <code>function</code>会被转换成<code>null</code>, 在对象里值为<code>undefined, function</code>的属性会被过滤掉</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123; </span><br><span class="line">	b: 42,</span><br><span class="line">	c: o,</span><br><span class="line">    d: function()&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">// create a circular reference inside `a`</span><br><span class="line">o.e = a;</span><br><span class="line"></span><br><span class="line">// would throw an error on the circular reference</span><br><span class="line">// JSON.stringify( a );</span><br><span class="line"></span><br><span class="line">// define a custom JSON value serialization</span><br><span class="line">a.toJSON = function() &#123;</span><br><span class="line">    // only include the `b` property for serialization</span><br><span class="line">    return &#123; b: this.b &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">JSON.stringify( a ); // &quot;&#123;&quot;b&quot;:42&#125;&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果我们对象引用了自身, 再执行<code>JSON.stringify</code>时会报异常, 我们可以给这个对象定义一个<code>toJSON</code>的方法, 返回一个默认对象, 来避免这种情况</p>
</blockquote>
<h2 id="Explicit-Coercion"><a href="#Explicit-Coercion" class="headerlink" title="Explicit Coercion"></a>Explicit Coercion</h2><h3 id="ToNumber"><a href="#ToNumber" class="headerlink" title="ToNumber"></a>ToNumber</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Nubmer(true);//1</span><br><span class="line">Nubmer(false);//0</span><br><span class="line">Nubmer(undefined);//NaN</span><br><span class="line">Nubmer(null);//0</span><br><span class="line">Nubmer(&quot;&quot;);//0</span><br><span class="line">Nubmer(&quot;false&quot;);//NaN</span><br><span class="line">Nubmer([]);//0</span><br><span class="line">Nubmer([&quot;&quot;]);//0</span><br><span class="line">Nubmer([&quot;&quot;, &quot;&quot;]);//NaN</span><br><span class="line">Nubmer(&#123;&#125;);//NaN</span><br><span class="line">Nubmer(function()&#123;&#125;);//NaN</span><br><span class="line"></span><br><span class="line">var num1 = true + 1; // 1 + 1 = 2</span><br><span class="line">var num2 = false + 1; //0 + 1 = 1</span><br><span class="line">var num3 = undefined + 1; //NaN + 1 = NaN</span><br><span class="line">var num4 = null + 1; // 0 + 1 = 1</span><br></pre></td></tr></table></figure>
<blockquote>
<p>综上可知, <code>true, false, undefined, null</code>在数学计算中, 强转后的数值不一, 格外需要注意的是<code>undefined</code>和非空字符串会被转换为<code>NaN</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> var a = &#123;</span><br><span class="line">        valueOf: function()&#123;</span><br><span class="line">            return &quot;42&quot;;</span><br><span class="line">        &#125;,</span><br><span class="line">        toString: function()&#123;</span><br><span class="line">            return &quot;4221&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line">    var b = &#123;</span><br><span class="line">        toString: function()&#123;</span><br><span class="line">            return &quot;42&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var c = [4,2];</span><br><span class="line">c.toString = function()&#123;</span><br><span class="line">    return this.join( &quot;&quot; ); // &quot;42&quot;</span><br><span class="line">&#125;;</span><br><span class="line">Number( a ); //42</span><br><span class="line">Number( b ); //42</span><br><span class="line">Number( c ); //42</span><br><span class="line">a + &apos;&apos;;//42</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果定义了<code>valueOf</code>, <code>toString</code>, 在强转的时候, 会优先调用<code>valueOf</code>, 如果没有<code>valueOf</code>, 再调用<code>toString</code></p>
</blockquote>
<h3 id="ToBoolean"><a href="#ToBoolean" class="headerlink" title="ToBoolean"></a>ToBoolean</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Boolean(&quot;&quot;);//false</span><br><span class="line">Boolean(NaN);//false</span><br><span class="line">Boolean(undefined);//false</span><br><span class="line">Boolean(null);//false</span><br><span class="line">Boolean(0);//false</span><br><span class="line">Boolean(-0);//false</span><br><span class="line"></span><br><span class="line">Boolean(new Boolean( false ));//true</span><br><span class="line">Boolean(new Number( 0 ));//true</span><br><span class="line">Boolean(new String( &quot;&quot; ));//true</span><br><span class="line">Boolean(&quot;0&quot;);//true</span><br><span class="line">Boolean([]);//true</span><br><span class="line">Boolean(&#123;&#125;);//true</span><br></pre></td></tr></table></figure>
<blockquote>
<p>只有上面几种情况会返回<code>false</code>, 其余都会返回<code>true</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Boolean(document.all)//false</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>Boolean(document.all)</code>居然返回false, 似乎和上面的结论矛盾, 其实是因为历史原因, <code>document.all</code>其实已经被废弃, 但是又为了兼容有些代码, 浏览器又不能把他删除, 但又不想让<code>if(document.all){}</code>这样的代码执行, 因此让<code>Boolean(document.all)</code>为<code>false</code>, 即使<code>document.all</code>返回的是一个类数组</p>
</blockquote>
<h3 id="Explicitly-Parsing-Numeric-Strings"><a href="#Explicitly-Parsing-Numeric-Strings" class="headerlink" title="Explicitly: Parsing Numeric Strings"></a>Explicitly: Parsing Numeric Strings</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a = &quot;42&quot;;</span><br><span class="line">var b = &quot;42px&quot;;</span><br><span class="line">Number( a );    // 42</span><br><span class="line">parseInt( a );  // 42</span><br><span class="line">Number( b );    // NaN</span><br><span class="line">parseInt( b );  // 42</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>parseInt</code>只要解析是值, 第一个是数字就能解析, 否则就返回<code>NaN</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">parseInt(1/0, 19);//18</span><br><span class="line">parseInt( 0.000008 );// 0   (&quot;0&quot; from &quot;0.000008&quot;)</span><br><span class="line">parseInt( 0.0000008 );// 8   (&quot;8&quot; from &quot;8e-7&quot;)</span><br><span class="line">parseInt( false, 16 );// 250 (&quot;fa&quot; from &quot;false&quot;)</span><br><span class="line">parseInt( parseInt, 16 );// 15  (&quot;f&quot; from &quot;function..&quot;)</span><br><span class="line">parseInt( &quot;0x10&quot; );// 16</span><br><span class="line">parseInt( &quot;103&quot;, 2 ); // 2</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>parseInt()</code>的一些奇怪现象</p>
</blockquote>
<h2 id="Implicit-Coercion"><a href="#Implicit-Coercion" class="headerlink" title="Implicit Coercion"></a>Implicit Coercion</h2><h3 id="Implicitly-Strings-lt-–-gt-Numbers"><a href="#Implicitly-Strings-lt-–-gt-Numbers" class="headerlink" title="Implicitly: Strings &lt;–&gt; Numbers"></a>Implicitly: Strings &lt;–&gt; Numbers</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a = [1,2];</span><br><span class="line">var b = [3,4];</span><br><span class="line">a + b; // &quot;1,23,4&quot;</span><br><span class="line"></span><br><span class="line">&#123;&#125; + [];//0 这里&#123;&#125;其实不是表示空对象, 而是表示一个块作用域, 因此没有任务作用, 所以 +[] 转换为数字为0</span><br><span class="line">[] + &#123;&#125;;//&quot;[object Object]&quot; 这里&#123;&#125;表示对象被强转成了字符串</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上是一些比较奇怪的现象</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> var a = &#123;</span><br><span class="line">        valueOf: function() &#123; return 42; &#125;,</span><br><span class="line">        toString: function() &#123; return 4; &#125;</span><br><span class="line">&#125;</span><br><span class="line">a + &quot;&quot;; // &quot;42&quot;</span><br><span class="line">String( a );    // &quot;4&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上两者转换是有区别的, <code>a + &quot;&quot;</code>这种形式会优先调用<code>valueOf</code>方法, 而<code>String()</code>直接调用<code>toString</code>方法</p>
</blockquote>
<h2 id="Loose-Equals-Versus-Strict-Equals"><a href="#Loose-Equals-Versus-Strict-Equals" class="headerlink" title="Loose Equals Versus Strict Equals"></a>Loose Equals Versus Strict Equals</h2><blockquote>
<p>我们经常会说<code>==</code>表示检测两者的值否是相等, <code>===</code>表示检测两者的值相等的同时再检测类型是否相同, 这种说法不是完全正确, 正确理解应该是, <code>==</code>会将两值转换成同一类型再进行比较, 而<code>===</code>不会将两值类型做转换而直接进行比较<br>当一个<code>String</code>类型和一个<code>Number</code>类型进行<code>==</code>比较, <code>String</code>类型会转换为<code>Number</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var num = 42;</span><br><span class="line">num == true;//false ==&gt; 42 == Number(true) ==&gt; 42 == 1</span><br><span class="line">num == false;//false ==&gt; 42 == Number(false) ==&gt; 42 == 0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面的比较结果居然都是<code>false</code>, 据我们上面分析得知, 42被转换为布尔值为<code>true</code>, 但实际上, 当一个<code>Number</code>类型和一个<code>Boolean</code>类型做比较时, <code>Boolean</code>类型会被转换成<code>Number</code>类型</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;42&quot;</span><br><span class="line">num == true;//false ==&gt; Number(&quot;42&quot;) == Number(true) ==&gt; 42 == 1</span><br><span class="line">num == false;//false ==&gt; Number(&quot;42&quot;) == Number(false) ==&gt; 42 == 0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当2个非数字类型的变量进行比较时, 两者都会转换成<code>Number</code>类型再进行比较</p>
</blockquote>
<h3 id="Comparing-nulls-to-unde-neds"><a href="#Comparing-nulls-to-unde-neds" class="headerlink" title="Comparing: nulls to unde neds"></a>Comparing: nulls to unde neds</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">null == undefined;//true</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>null</code>和<code>undefined</code>这两者与其他类型比较都是返回<code>false</code>, 只有以上情况, 会返回<code>true</code>,</p>
</blockquote>
<h3 id="Comparing-objects-to-nonobjects"><a href="#Comparing-objects-to-nonobjects" class="headerlink" title="Comparing: objects to nonobjects"></a>Comparing: objects to nonobjects</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 42;</span><br><span class="line">var b = [42];</span><br><span class="line">a == b; //true</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上结果得知, 所有对象类型与原始标量类型做比较时, 对象类型都会被转换成原始标量类型再进行比较</p>
</blockquote>
<h3 id="Edge-Cases"><a href="#Edge-Cases" class="headerlink" title="Edge Cases"></a>Edge Cases</h3><blockquote>
<p>一些比较奇怪的bug</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Number.prototype.valueOf = function() &#123;</span><br><span class="line">    return 3;</span><br><span class="line">&#125;;</span><br><span class="line">new Nubmer( 2 ); //2 </span><br><span class="line">new Number( 2 ) == 3;   // true</span><br><span class="line">new Number( 2 ) == 2;   // false</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面是比较奇怪的<code>bug</code>, 返回是2, 但是与2不相等</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var i = 2;</span><br><span class="line">    Number.prototype.valueOf = function() &#123;</span><br><span class="line">        return i++;</span><br><span class="line">&#125;;</span><br><span class="line">var a = new Number( 42 );</span><br><span class="line">if (a == 2 &amp;&amp; a == 3) &#123;</span><br><span class="line">    console.log( &quot;Yep, this happened.&quot; );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>以上<code>if</code>结果是<code>true</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;0&quot; == false; //true 两者类型不同, 都会转换成Number类型再进行比较</span><br><span class="line">&quot;0&quot; == &quot;&quot;; //false 都是字符串类型, 不进行转换直接比较</span><br><span class="line"></span><br><span class="line">false == []; //true //转换成数字类型再进行比较</span><br><span class="line">false == &#123;&#125;; //false //转换成数字类型再进行比较</span><br><span class="line"></span><br><span class="line">&quot;&quot; == []; //true</span><br><span class="line">&quot;&quot; == &#123;&#125;; //false</span><br><span class="line"></span><br><span class="line">0 == []; //true</span><br><span class="line">0 == &#123;&#125;; //false</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面为何 <code>[]``{}</code> 比较结果不一样呢? 因为<code>Number([]) === 0</code> <code>Number({})</code>结果为NaN; <code>String([]) === &#39;&#39;</code> <code>String({}) === [object Object]</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[] == ![]; //true</span><br></pre></td></tr></table></figure>
<blockquote>
<p>非常奇怪, 上面结果是<code>true</code>, 因为上面的转换规则如下 <code>==&gt; [] == false ==&gt; ==&gt; Number([]) == Number(false) ==&gt; 0 == 0 ==&gt; true</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 == [2];       // true  Number([2]) ==&gt; 2</span><br><span class="line">&quot;&quot; == [null];   // true  String([null]) ==&gt; &quot;&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面, 只要按照对象类型与原始类型比较时, 对象类型会被转换成原始类型再进行比较</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 == &quot;\n&quot; //==&gt; 0 == Number(&quot;\n&quot;) ==&gt; 0 == 0</span><br></pre></td></tr></table></figure>
<h3 id="Abstract-Relational-Comparison"><a href="#Abstract-Relational-Comparison" class="headerlink" title="Abstract Relational Comparison"></a>Abstract Relational Comparison</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[42] &lt; [&quot;43&quot;]; //true</span><br><span class="line">[&quot;42&quot;] &lt; [&quot;043&quot;]; //false</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面第一条是可以理解的, 第二条是因为两者都是字符串数组, 所以就转换成字符串比较, 字符串比较是按位比较的, 他们各自的第一位分别是4与0, 所有<code>[&quot;42&quot;] &gt; [&quot;043&quot;]</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var a = &#123; b: 42 &#125;;</span><br><span class="line">var b = &#123; b: 43 &#125;;</span><br><span class="line"></span><br><span class="line">a &lt; b;  // false</span><br><span class="line">a == b; // false</span><br><span class="line">a &gt; b;  // false</span><br><span class="line"></span><br><span class="line">a &lt;= b; // true</span><br><span class="line">a &gt;= b; // true</span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面真是个奇怪的现象, 为什么会这样呢? 因为js判断<code>a &lt;= b</code>的时候其实是转换成<code>!(a&gt;b)</code> 判断<code>a&gt;=b</code>的时候其实是转换成<code>!(a&lt;b)</code></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.hellolc.com/2017/10/22/Coercion/" data-id="cl6xm2uhn00042f5wn1liy5xk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/You-Don-t-Know-JS/">You Don't Know JS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/12/02/Generators/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Generators
        
      </div>
    </a>
  
  
    <a href="/2017/10/20/Natives/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Natives</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Core-HTML5-Canvas/">Core HTML5 Canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVA/">JAVA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript-Web-Applications/">JavaScript Web Applications</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript设计模式与开发实践/">JavaScript设计模式与开发实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jquery/">Jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pro-Git/">Pro Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactNative/">ReactNative</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim实用技巧/">Vim实用技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/You-Don-t-Know-JS/">You Don't Know JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaScript高级程序设计笔记/">javaScript高级程序设计笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux系统编程/">linux系统编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tools/">tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深入React技术栈/">深入React技术栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深入浅出Node-js/">深入浅出Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深入理解计算机系统/">深入理解计算机系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Core-HTML5-Canvas/" style="font-size: 12px;">Core HTML5 Canvas</a> <a href="/tags/JAVA/" style="font-size: 10px;">JAVA</a> <a href="/tags/JavaScript/" style="font-size: 18px;">JavaScript</a> <a href="/tags/JavaScript-Web-Applications/" style="font-size: 12px;">JavaScript Web Applications</a> <a href="/tags/JavaScript设计模式与开发实践/" style="font-size: 10px;">JavaScript设计模式与开发实践</a> <a href="/tags/Jquery/" style="font-size: 10px;">Jquery</a> <a href="/tags/Pro-Git/" style="font-size: 10px;">Pro Git</a> <a href="/tags/ReactNative/" style="font-size: 12px;">ReactNative</a> <a href="/tags/Vim实用技巧/" style="font-size: 10px;">Vim实用技巧</a> <a href="/tags/You-Don-t-Know-JS/" style="font-size: 16px;">You Don't Know JS</a> <a href="/tags/css/" style="font-size: 12px;">css</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/javaScript高级程序设计笔记/" style="font-size: 20px;">javaScript高级程序设计笔记</a> <a href="/tags/linux系统编程/" style="font-size: 10px;">linux系统编程</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/数据结构与算法/" style="font-size: 10px;">数据结构与算法</a> <a href="/tags/深入React技术栈/" style="font-size: 14px;">深入React技术栈</a> <a href="/tags/深入浅出Node-js/" style="font-size: 10px;">深入浅出Node.js</a> <a href="/tags/深入理解计算机系统/" style="font-size: 10px;">深入理解计算机系统</a> <a href="/tags/算法/" style="font-size: 12px;">算法</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/20/FastJSON Key Hash冲突问题/">FastJSON Key Hash冲突问题</a>
          </li>
        
          <li>
            <a href="/2018/05/18/设计模式/">设计模式</a>
          </li>
        
          <li>
            <a href="/2018/05/09/数据结构/">数据结构与算法</a>
          </li>
        
          <li>
            <a href="/2018/05/06/Drawing/">Drawing</a>
          </li>
        
          <li>
            <a href="/2018/05/02/Vim实用技巧/">Vim实用技巧</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 lichen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>